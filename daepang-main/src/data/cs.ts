// CS(컴퓨터공학/운영체제/네트워크/DB/보안): 6단계 × 10문항
export type Question = { q: string; choices: string[]; a: number; hint?: string; exp?: string };
type Bank = Record<number, Question[]>;

function makeMC(topic: string, facts: string[]): Question[] {
  const distractors = ["관련 없는 진술", "일반적으로 틀린 진술", "반대 개념에 가깝다"];
  return Array.from({ length: 10 }).map((_, i) => {
    const fact = facts[i % facts.length];
    const correct = i % 4;
    const choices = Array(4).fill("");
    choices[correct] = fact;
    let j = 0;
    for (let k = 0; k < 4; k++) if (k !== correct) choices[k] = distractors[j++];
    return { q: `[${topic}] 옳은 설명을 고르세요.`, choices, a: correct, hint: fact, exp: `정답: ${fact}` };
  });
}

const QBANK: Bank = {
  1: makeMC("컴구/OS", [
    "폰 노이만 구조는 코드와 데이터가 동일 메모리 공간을 공유한다",
    "CPU는 ALU와 제어장치로 구성된다",
    "명령 파이프라이닝은 처리량을 높인다",
    "인터럽트는 현재 작업을 중단하고 ISR로 분기한다",
    "캐시는 지역성 원리를 이용한다",
    "시간 분할 시스템은 다중 사용자를 지원한다",
    "RAID 1은 미러링을 사용한다",
    "SSD는 랜덤 접근 지연이 낮다",
    "버스 구조는 병목이 발생할 수 있다",
    "DMA는 CPU 개입 없이 데이터를 전송한다",
  ]),
  2: makeMC("프로세스/스레드", [
    "프로세스는 독립적인 주소 공간을 가진다",
    "스레드는 프로세스 내 자원을 공유한다",
    "PCB는 프로세스 상태 정보를 보관한다",
    "컨텍스트 스위치는 오버헤드가 있다",
    "멀티스레드는 문맥 전환 비용이 낮다",
    "임계구역은 상호 배제가 필요하다",
    "스케줄러는 준비 큐에서 다음 작업을 선택한다",
    "스레드는 각자 스택을 가진다",
    "커널 스레드는 커널이 직접 관리한다",
    "사용자 스레드는 라이브러리가 관리한다",
  ]),
  3: makeMC("메모리", [
    "페이징은 고정 크기 프레임을 사용한다",
    "세그멘테이션은 가변 크기 세그먼트를 사용한다",
    "내부 단편화는 페이징에서 발생한다",
    "외부 단편화는 세그멘테이션에서 발생한다",
    "TLB는 주소 변환을 캐시한다",
    "LRU는 가장 오래 사용하지 않은 페이지를 교체한다",
    "스와핑은 프로세스를 디스크로 내보낸다",
    "페이지 폴트는 디스크 I/O가 필요하다",
    "Copy-On-Write는 fork 최적화 기법이다",
    "메모리 매핑 파일은 파일을 주소 공간에 매핑한다",
  ]),
  4: makeMC("네트워크", [
    "TCP는 3-way 핸드셰이크로 연결을 수립한다",
    "UDP는 비연결형이다",
    "DNS 기본 포트는 UDP 53이다",
    "HTTP 404는 Not Found를 의미한다",
    "HTTPS는 TLS를 사용한다",
    "CIDR는 가변 길이 프리픽스를 사용한다",
    "ARP는 IP에서 MAC 주소를 해석한다",
    "NAT는 사설 IP를 공인 IP로 변환한다",
    "ICMP는 제어 메시지 프로토콜이다",
    "OSI 전송계층에는 TCP와 UDP가 포함된다",
  ]),
  5: makeMC("DB/트랜잭션", [
    "ACID는 원자성·일관성·고립성·지속성을 의미한다",
    "정규화는 이상 현상을 줄이기 위한 설계다",
    "인덱스는 탐색을 빠르게 하지만 쓰기 비용을 높일 수 있다",
    "B+트리는 리프 노드에 모든 키를 저장한다",
    "조인은 두 테이블을 결합하는 연산이다",
    "트랜잭션 격리 수준은 일관성에 영향을 준다",
    "낙관적 락은 커밋 시 충돌을 검사한다",
    "비관적 락은 자원을 선점한다",
    "데드락은 상호 대기로 인해 발생한다",
    "읽기 확장은 리플리카로 달성할 수 있다",
  ]),
  6: makeMC("보안", [
    "대칭키 암호의 대표는 AES이다",
    "비대칭키 암호에는 RSA와 ECC가 있다",
    "해시는 단방향 함수다",
    "솔트는 무차별 대입을 어렵게 한다",
    "XSS는 스크립트 주입 공격이다",
    "CSRF는 사용자의 의도치 않은 요청을 유도한다",
    "SQL 인젝션은 입력 검증 부족에서 발생한다",
    "HTTPS는 서버 인증을 제공한다",
    "HSTS는 HTTPS 접속을 강제한다",
    "최소 권한 원칙은 권한 남용을 줄인다",
  ]),
};
export default QBANK;
